local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()
local MainWindow = WindUI:CreateWindow({
    Title = "ScriptWare",
    Author = "by Nezure Chill_Man and William Afton",
    
    Resizable = true,
    SideBarWidth = 200,
    ScrollBarEnabled = true,
})
MainWindow:EditOpenButton({
    Title = "Open UI",
    Icon = "monitor",
    CornerRadius = UDim.new(0,16),
    StrokeThickness = 2,
    OnlyMobile = false,
    Enabled = true,
    Draggable = true,
})
local Main = Window:Tab({
    Title = "Main",
    Locked = false,

})
Main:Select()
--[[ local AntiFallButton = Main:Button({
    Title = "Anti-Fall platform",
    Locked = false,
    Callback = function()
        local continue = true
        local existing = workspace:FindFirstChild("AntiFallPlatform")
        if existing then 
            existing:Destroy() 
            continue = false
        end
        if continue then
            local AntiFall = Instance.new("Part")
            AntiFall.Name = "AntiFallPlatform" 
            AntiFall.Size = Vector3.new(300, 2, 300) 
            AntiFall.CFrame = CFrame.new(0, -7, 0)
            AntiFall.CanCollide = true
            AntiFall.Anchored = true
            AntiFall.Transparency = 0.5
            AntiFall.Parent = workspace

            print("platform spawned")
        end
    end
}) ]]
local Toggle = Main:Toggle({
    Title = "Anti-Fall platform",
    Value = false,
    Callback = function(state)
        local continue = true
        local existing = workspace:FindFirstChild("AntiFallPlatform")
        if existing or not state then 
            existing:Destroy() 
        end
        if state then
            local AntiFall = Instance.new("Part")
            AntiFall.Name = "AntiFallPlatform" 
            AntiFall.Size = Vector3.new(300, 2, 300) 
            AntiFall.CFrame = CFrame.new(0, -7.01, 0)
            AntiFall.CanCollide = true
            AntiFall.Anchored = true
            AntiFall.Transparency = 0.5
            AntiFall.Parent = workspace

            print("platform spawned")
        end
    end
})

local esp = Main:Button({
    Title = "Esp Player",
    Locked = false,
    Callback = function()
        local Players = game:GetService("Players")
        local RunService = game:GetService("RunService")
        local Workspace = game:GetService("Workspace")

        local localPlayer = Players.LocalPlayer

        local skinModels = {}
        local lasers = {}

        local LASER_COLOR = Color3.fromRGB(255, 0, 0)
        local LASER_WIDTH_SCALE = 1/12.5
        local LASER_HEIGHT_OFFSET = 0.4
        local LASER_SHORTEN = 0.50

        local function isHitbox(part)
            local n = part.Name:lower()
            if n:find("hitbox") or n == "hb" then
                return true
            end
            if part.Size.Magnitude > 10 then
                return true
            end
            return false
        end

        local function fixCharacter(character)
            for _, obj in ipairs(character:GetDescendants()) do
                if obj:IsA("BasePart") then
                    if obj.Name ~= "HumanoidRootPart" then
                        if isHitbox(obj) then
                            obj.Transparency = 1
                            obj.LocalTransparencyModifier = 1
                            obj.CanCollide = false
                        else
                            obj.Transparency = 0
                            obj.LocalTransparencyModifier = 0
                        end
                    end
                elseif obj:IsA("Decal") then
                    obj.Transparency = 0
                end
            end
        end

        local function trackModel(model)
            if skinModels[model] then return end
            if model:IsA("Model") and model.Name:lower():sub(1,5) == "skin_" then
                skinModels[model] = true
                local laser = Instance.new("Part")
                laser.Anchored = true
                laser.CanCollide = false
                laser.Material = Enum.Material.Neon
                laser.Color = LASER_COLOR
                laser.Transparency = 0
                laser.Name = "SkinLaser"
                laser.Parent = Workspace
                lasers[model] = laser
            end
        end

        for _, obj in ipairs(Workspace:GetDescendants()) do
            trackModel(obj)
        end

        Workspace.DescendantAdded:Connect(trackModel)

        local function getBoundingBox(model)
            local cframe, size
            pcall(function()
                cframe, size = model:GetBoundingBox()
            end)
            return cframe, size
        end

        RunService.RenderStepped:Connect(function()
            for _, player in ipairs(Players:GetPlayers()) do
                if player ~= localPlayer then
                    local character = player.Character
                    if character and character.Parent then
                        fixCharacter(character)
                    end
                end
            end

            for model, _ in pairs(skinModels) do
                if model.Parent then
                    for _, part in ipairs(model:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.Transparency = 0
                            part.CanCollide = false
                            if part.Material == Enum.Material.ForceField then
                                part.Material = Enum.Material.SmoothPlastic
                            end
                        end
                    end

                    local laser = lasers[model]
                    if laser then
                        local cframe, size = getBoundingBox(model)
                        if cframe and size then
                            local laserSize = Vector3.new(size.X * LASER_WIDTH_SCALE, size.Y * LASER_WIDTH_SCALE, size.Z - LASER_SHORTEN*2)
                            laser.Size = laserSize

                            local front = cframe.Position + (cframe.LookVector * (size.Z/2 - LASER_SHORTEN))
                            local back = cframe.Position - (cframe.LookVector * (size.Z/2 - LASER_SHORTEN))
                            local centerLine = (front + back) / 2
                            centerLine = centerLine + Vector3.new(0, LASER_HEIGHT_OFFSET, 0)

                            laser.CFrame = CFrame.new(centerLine, centerLine + cframe.LookVector)
                        end
                    end
                else
                    if lasers[model] then
                        lasers[model]:Destroy()
                        lasers[model] = nil
                    end
                    skinModels[model] = nil
                end
            end
        end)
    end
})
local AntiHit = Main:Button({
    Title = "Anti Hit",
    Locked = false,
    Callback = function()
        Humanoid = game.Players.LocalPlayer.Character:FindFirstChild("Humanoid")
        if Humanoid.HipHeight == -2 then
            Humanoid.HipHeight = 0
        else
            Humanoid.HipHeight = -2
        end
    end
})

local loadIY = Main:Button({
    Title = "Load IY",
    Locked = false,
    Callback = function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
    end
})
local trophycollect = Main:Button({
    Title = "Complete Obby",
    Locked = false,
    Callback = function()
        local localcharacter = game:GetService("Players").LocalPlayer.Character
        local oldpos = localcharacter.HumanoidRootPart.CFrame
        print("Teleported")
        firetouchinterest(localcharacter.Head, workspace.Trophy, 0)
        wait(0.3)
        localcharacter.HumanoidRootPart.CFrame = oldpos
        print("completed")
    end
})
stoploop = false
local spamautocollect = Main:Toggle({
    Title = "Auto Collect",
    Type = "Toggle",
    Value = false, -- default value
    Callback = function(state)
        if state then
          while true do
            if stoploop then
                print("stopped")
                stoploop = false
                break
            end
            print("touched")
            print(stoploop)
            local localcharacter = game:GetService("Players").LocalPlayer.Character
            firetouchinterest(localcharacter.Head, workspace.Trophy, 0)
            firetouchinterest(localcharacter.Head, workspace.Trophy, 1)
            task.wait(3)
          end
        else
            stoploop = true
        end
    end
})
local stoploop2 = false
local autoaim = Main:Toggle({
    Title = "Auto Aim at Players",
    Type = "Toggle",
    Callback = function(state) 
        local RunService = game:GetService("RunService")
        if state then
         local heartbeatConnection
            heartbeatConnection = RunService.Heartbeat:Connect(function()
             if stoploop2 then
                print("stopped")
                 heartbeatConnection:Disconnect()
                 stoploop2 = false
                 return
             end
        
             local character = game:GetService("Players").LocalPlayer.Character
             local hrp = character.HumanoidRootPart
             local playerlist = {}
        
             local function getclosestplayer()
                 for i, v in pairs(game:GetService("Players"):GetChildren()) do
                     local mag = (v.Character.HumanoidRootPart.CFrame.Position - hrp.CFrame.Position).Magnitude
                     playerlist[tostring(v.Character.Name)] = mag
                 end
                 local unpackedfinal = {}
                 local unpacked = unpack(playerlist)
                 for i, v in pairs(unpacked) do
                    
                 end
                 local lowest = math.min()
                 return(table.find(playerlist, lowest))
             end
        
             hrp.CFrame = CFrame.lookAt(hrp.CFrame.Position, getclosestplayer())
            end)
        else
         stoploop2 = true
        end
    end
})
